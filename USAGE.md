# AI创作助手 - 使用指南

## 🚀 快速开始

### 方法一：使用启动脚本（推荐）
1. 双击运行 `start.bat` 脚本
2. 脚本会自动检查环境、安装依赖并启动服务
3. 等待浏览器自动打开或手动访问 http://localhost:5173

### 方法二：手动启动
```bash
# 1. 安装依赖
npm install

# 2. 启动后端API服务（新终端窗口）
npm run server

# 3. 启动前端开发服务器（另一个新终端窗口）
npm run dev
```

## 📁 功能特性

### ✅ 完成的功能
- **真实文件系统映射**: 左侧文件树完全映射本地 `data/` 目录
- **文件读写**: 可以真实读取和保存文件到本地磁盘
- **文件管理**: 支持创建、删除、重命名文件和文件夹
- **文件浏览**: 支持多级目录展开/折叠
- **实时编辑**: 文本编辑器支持实时编辑和保存
- **状态提示**: 显示文件修改状态和加载状态

### 🎯 使用方法

#### 1. 文件操作
- **选择文件**: 点击左侧文件树中的文件名
- **编辑文件**: 在中间编辑器中修改内容
- **保存文件**: 点击"保存"按钮或使用快捷键

#### 2. 文件管理
- **创建文件/文件夹**: 
  - 点击文件浏览器标题栏的"+"按钮
  - 或右键点击文件夹，选择"新建文件"或"新建文件夹"
- **删除**: 右键点击文件/文件夹，选择"删除"
- **重命名**: 右键点击文件/文件夹，选择"重命名"

#### 3. 目录结构
```
data/
├── novels/          # 小说文件
│   └── 西游记.md
├── characters/      # 人物档案
│   └── 孙悟空.md
├── settings/        # 配置文件
│   └── config.json
└── readme.md        # 说明文件
```

## ⚠️ 注意事项

1. **服务依赖**: 前端需要后端API服务运行在 http://localhost:3001
2. **文件安全**: 只能操作 `data/` 目录下的文件，其他位置的文件会被拒绝访问
3. **数据持久化**: 所有文件操作都会直接影响本地文件系统
4. **网络需求**: 本地运行，无需互联网连接

## 🔧 技术架构

### 前端 (React + TypeScript)
- **框架**: Vite + React 18 + TypeScript
- **UI组件**: shadcn-ui + Tailwind CSS
- **状态管理**: React Hooks
- **HTTP客户端**: Fetch API

### 后端 (Node.js + Express)
- **运行时**: Node.js
- **框架**: Express.js
- **文件系统**: Node.js fs模块
- **安全**: 路径验证防止目录遍历攻击

### API接口
- `GET /api/files` - 获取文件树结构
- `GET /api/files/*` - 读取指定文件内容
- `PUT /api/files/*` - 保存文件内容
- `POST /api/files` - 创建新文件/文件夹
- `DELETE /api/files/*` - 删除文件/文件夹
- `PATCH /api/files/*` - 重命名文件/文件夹

## 🐛 故障排除

### 问题1: npm 命令不识别
**解决方案**: 安装 Node.js
1. 访问 https://nodejs.org/
2. 下载并安装LTS版本
3. 重启命令行窗口

### 问题2: 端口被占用
**解决方案**: 
- 前端端口 5173 被占用时，Vite会自动使用下一个可用端口
- 后端端口 3001 被占用时，需要手动修改 `server.js` 中的端口号

### 问题3: 文件操作失败
**可能原因**:
- 后端服务未启动
- 文件权限不足
- 路径包含特殊字符

## 🎉 开始使用

1. 确保已安装 Node.js
2. 运行 `start.bat` 或手动启动服务
3. 打开浏览器访问 http://localhost:5173
4. 开始您的创作之旅！

---

💡 **提示**: 这是一个完全本地化的文件编辑器，所有数据都保存在您的本地磁盘上，确保数据安全和隐私。
